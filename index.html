<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Dijkstra Algorithmus - IT Präsentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body, html { width: 100vw; height: 100vh; margin: 0; padding: 0; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0f172a; color: #e2e8f0; }
        
        /* Slide Logic */
        .slide {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0; transition: opacity 0.8s ease-in-out; pointer-events: none;
            display: flex; flex-direction: column; padding: 2rem; box-sizing: border-box;
        }
        .slide.active { opacity: 1; pointer-events: all; z-index: 10; }

        /* UI Elements */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        .highlight-text { color: #38bdf8; text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); }
        
        /* Navigation */
        .nav-button {
            background: rgba(56, 189, 248, 0.2); color: #38bdf8;
            padding: 0.8rem 1.5rem; border-radius: 9999px;
            cursor: pointer; transition: all 0.3s; border: 1px solid #38bdf8;
            backdrop-filter: blur(5px);
        }
        .nav-button:hover { background: rgba(56, 189, 248, 0.4); transform: scale(1.05); }
        .nav-button:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }

        /* Graph Visualization */
        svg { width: 100%; height: 100%; }
        .node circle { fill: #1e293b; stroke: #94a3b8; stroke-width: 3px; transition: all 0.5s; }
        .node text { font-family: sans-serif; font-weight: bold; fill: white; pointer-events: none; font-size: 16px; }
        .node.visited circle { fill: #10b981; stroke: #059669; } /* Green for visited */
        .node.current circle { fill: #f59e0b; stroke: #d97706; transform: scale(1.2); } /* Orange for processing */
        
        .link { stroke: #475569; stroke-width: 2px; transition: all 0.5s; }
        .link-label { fill: #94a3b8; font-size: 14px; background: #0f172a; }

        /* Table Styling */
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; color: #cbd5e1; }
        th, td { border: 1px solid #334155; padding: 10px; text-align: center; }
        th { background-color: #1e293b; color: #38bdf8; }
        tr.active-row { background-color: rgba(245, 158, 11, 0.2); }

    </style>
</head>
<body>

<div class="slide active flex justify-center items-center text-center" id="slide-1">
    <div class="absolute inset-0 z-0 opacity-20">
        <svg width="100%" height="100%"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="#38bdf8" stroke-width="0.5"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" /></svg>
    </div>
    <div class="z-10 relative">
        <h1 class="text-7xl font-bold mb-6 text-white drop-shadow-lg"><span class="text-blue-500">Dijkstra</span> Algorithmus</h1>
        <h2 class="text-3xl text-gray-300 mb-8 font-light">Der Weg ist das Ziel – <span class="highlight-text font-bold">nur schneller</span>.</h2>
        <div class="glass-panel p-6 inline-block"><p class="text-xl text-blue-200"><i class="fas fa-terminal mr-2"></i> IT-Präsentation</p></div>
    </div>
</div>

<div class="slide" id="slide-2">
    <h1 class="text-4xl font-bold text-blue-400 mb-8 border-b border-gray-700 pb-4">Was ist der Dijkstra-Algorithmus?</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 flex-1 items-center">
        <div class="glass-panel p-8 h-full flex flex-col justify-center">
            <ul class="space-y-6 text-xl">
                <li class="flex items-start"><i class="fas fa-route mt-1 mr-4 text-green-400"></i><span>Löst das <strong>Kürzeste-Wege-Problem</strong>.</span></li>
                <li class="flex items-start"><i class="fas fa-cookie-bite mt-1 mr-4 text-yellow-400"></i><span>Gehört zu <strong>Greedy-Algorithmen</strong> ("Gierig").</span></li>
                <li class="flex items-start"><i class="fas fa-ban mt-1 mr-4 text-red-400"></i><span>Keine negativen Kantengewichte erlaubt.</span></li>
                <li class="flex items-start"><i class="fas fa-map-marked-alt mt-1 mr-4 text-purple-400"></i><span>Basis für Routenplaner (Google Maps).</span></li>
            </ul>
        </div>
        <div class="flex justify-center items-center"><i class="fas fa-network-wired text-9xl text-gray-700 opacity-50"></i></div>
    </div>
</div>

<div class="slide" id="slide-3">
    <h1 class="text-4xl font-bold text-blue-400 mb-6">Wie funktioniert es? (Begriffe)</h1>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-full pb-10">
        <div class="glass-panel p-6 flex flex-col items-center text-center"><div class="w-20 h-20 rounded-full bg-blue-600 flex items-center justify-center text-3xl mb-4 font-bold">1</div><h3 class="text-2xl font-bold mb-2">Initialisierung</h3><p class="text-gray-300">Start = 0.<br>Alle anderen = &infin;.</p></div>
        <div class="glass-panel p-6 flex flex-col items-center text-center"><div class="w-20 h-20 rounded-full bg-yellow-600 flex items-center justify-center text-3xl mb-4 font-bold">2</div><h3 class="text-2xl font-bold mb-2">Relaxation</h3><p class="text-gray-300">Ist der neue Weg kürzer als der alte?<br><code>Neu < Alt? -> Update!</code></p></div>
        <div class="glass-panel p-6 flex flex-col items-center text-center"><div class="w-20 h-20 rounded-full bg-green-600 flex items-center justify-center text-3xl mb-4 font-bold">3</div><h3 class="text-2xl font-bold mb-2">Wähle Minimum</h3><p class="text-gray-300">Nimm immer den Knoten mit der kleinsten Distanz als nächstes.</p></div>
    </div>
</div>

<div class="slide" id="slide-4">
    <div class="flex justify-between items-center mb-4">
        <h1 class="text-3xl font-bold text-white">Live Simulation</h1>
        <div class="flex gap-4">
             <button class="nav-button bg-red-500/20 text-red-400 border-red-500" onclick="resetDijkstra()"><i class="fas fa-undo mr-2"></i> Reset</button>
            <button id="step-btn" class="nav-button bg-green-500/20 text-green-400 border-green-500" onclick="nextStep()"><i class="fas fa-step-forward mr-2"></i> Nächster Schritt</button>
        </div>
    </div>
    <div class="flex flex-1 gap-6 h-full">
        <div class="w-2/3 glass-panel relative" id="graph-container"></div>
        <div class="w-1/3 flex flex-col gap-4">
            <div class="glass-panel p-4 h-1/4 overflow-y-auto"><h3 class="text-blue-300 font-bold mb-2">Status</h3><p id="status-text" class="text-sm">Klicke "Nächster Schritt".</p></div>
            <div class="glass-panel p-4 flex-1 overflow-auto"><h3 class="text-yellow-300 font-bold mb-2">Distanztabelle</h3><table id="dijkstra-table"><thead><tr><th>Knoten</th><th>Distanz</th><th>Vorgänger</th></tr></thead><tbody id="table-body"></tbody></table></div>
        </div>
    </div>
</div>

<div class="slide" id="slide-5">
    <h1 class="text-4xl font-bold text-green-400 mb-4">Ergebnis: Den Weg ablesen</h1>
    <div class="flex flex-1 gap-6 h-full">
        <div class="w-1/2 glass-panel relative" id="result-graph-container"></div>
        
        <div class="w-1/2 flex flex-col justify-center gap-6">
            <div class="glass-panel p-6">
                <h2 class="text-2xl text-white font-bold mb-4"><i class="fas fa-search-location text-yellow-400"></i> Backtracking (Rückverfolgung)</h2>
                <p class="text-xl text-gray-300 mb-4">Der Algorithmus ist fertig. Aber wo ist der Weg? Wir müssen <strong>rückwärts</strong> lesen.</p>
                
                <div class="bg-slate-800 p-4 rounded-lg border-l-4 border-blue-500">
                    <ol class="list-decimal list-inside space-y-3 text-lg">
                        <li>Start beim Ziel: <strong class="text-green-400">E</strong>.</li>
                        <li>Wer war der Vorgänger von E? &rarr; <strong class="text-blue-300">C</strong>.</li>
                        <li>Wer war der Vorgänger von C? &rarr; <strong class="text-blue-300">B</strong>.</li>
                        <li>Wer war der Vorgänger von B? &rarr; <strong class="text-blue-300">A (Start)</strong>.</li>
                    </ol>
                </div>
            </div>

            <div class="glass-panel p-6 text-center">
                <h3 class="text-gray-400 uppercase text-sm tracking-wide mb-2">Finaler Pfad</h3>
                <div class="text-4xl font-bold text-white mb-2">
                    A &rarr; B &rarr; C &rarr; E
                </div>
                <div class="text-2xl text-green-400">
                    Gesamtkosten: <strong>250</strong>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="slide" id="slide-6">
    <h1 class="text-4xl font-bold text-blue-400 mb-8">Zusammenfassung</h1>
    <div class="glass-panel p-10 max-w-4xl mx-auto w-full">
        <h2 class="text-2xl text-white mb-6">Das Wichtigste in Kürze:</h2>
        <div class="space-y-4">
            <div class="flex items-center p-4 bg-slate-800/50 rounded-lg"><i class="fas fa-check-circle text-green-400 text-2xl mr-4"></i><span class="text-lg">Dijkstra findet garantiert das Optimum (wenn Gewichte positiv).</span></div>
            <div class="flex items-center p-4 bg-slate-800/50 rounded-lg"><i class="fas fa-history text-yellow-400 text-2xl mr-4"></i><span class="text-lg">Der Weg wird am Ende durch die <strong>Vorgänger</strong> rekonstruiert.</span></div>
            <div class="flex items-center p-4 bg-slate-800/50 rounded-lg"><i class="fas fa-tachometer-alt text-red-400 text-2xl mr-4"></i><span class="text-lg">Sehr effizient und wird überall in der IT genutzt.</span></div>
        </div>
    </div>
</div>

<div class="fixed bottom-6 right-6 flex gap-4 z-50">
    <button class="nav-button" onclick="changeSlide(-1)"><i class="fas fa-arrow-left"></i> Zurück</button>
    <div class="bg-slate-800 text-white px-4 py-2 rounded-full flex items-center border border-slate-600" id="page-indicator">1 / 6</div>
    <button class="nav-button" onclick="changeSlide(1)">Weiter <i class="fas fa-arrow-right"></i></button>
</div>

<script>
    // Config
    let currentSlide = 1;
    const totalSlides = 6;
    
    // Graph Logic
    const nodes = [
        { id: 'A', x: 100, y: 200 }, { id: 'B', x: 300, y: 100 },
        { id: 'C', x: 500, y: 100 }, { id: 'D', x: 300, y: 300 },
        { id: 'E', x: 600, y: 250 }
    ];
    // Final solution hardcoded for "Result" slide visual
    const finalPathEdges = [
        {s:'A', t:'B'}, {s:'B', t:'C'}, {s:'C', t:'E'}
    ];
    
    const links = [
        { source: 'A', target: 'B', weight: 100 }, { source: 'A', target: 'D', weight: 50 },
        { source: 'B', target: 'C', weight: 100 }, { source: 'D', target: 'E', weight: 250 },
        { source: 'C', target: 'E', weight: 50 },  { source: 'D', target: 'B', weight: 80 },
        { source: 'B', target: 'E', weight: 300 }
    ];

    // State for Simulation
    let simNodes = JSON.parse(JSON.stringify(nodes));
    simNodes.forEach(n => { n.dist = Infinity; n.pred = null; n.visited = false; });
    simNodes[0].dist = 0;

    function changeSlide(direction) {
        document.getElementById(`slide-${currentSlide}`).classList.remove('active');
        currentSlide += direction;
        if (currentSlide < 1) currentSlide = 1;
        if (currentSlide > totalSlides) currentSlide = totalSlides;
        document.getElementById(`slide-${currentSlide}`).classList.add('active');
        document.getElementById('page-indicator').innerText = `${currentSlide} / ${totalSlides}`;
        
        if(currentSlide === 4) initSimGraph();
        if(currentSlide === 5) initResultGraph();
    }

    // --- Slide 4: Simulation Render ---
    function initSimGraph() {
        renderGraph("#graph-container", simNodes, links, false);
        updateTable();
    }

    function resetDijkstra() {
        simNodes = JSON.parse(JSON.stringify(nodes));
        simNodes.forEach(n => { n.dist = Infinity; n.pred = null; n.visited = false; });
        simNodes[0].dist = 0;
        document.getElementById('step-btn').disabled = false;
        document.getElementById('status-text').innerHTML = "Reset durchgeführt.";
        initSimGraph();
    }

    function nextStep() {
        const unvisited = simNodes.filter(n => !n.visited);
        if (unvisited.length === 0 || unvisited.every(n => n.dist === Infinity)) {
            document.getElementById('status-text').innerHTML = "<span class='text-green-400'>FERTIG!</span> Weiter zur nächsten Folie für das Ergebnis.";
            document.getElementById('step-btn').disabled = true;
            return;
        }
        unvisited.sort((a, b) => a.dist - b.dist);
        const current = unvisited[0];
        current.visited = true;

        // Neighbor logic
        const neighbors = links.filter(l => l.source === current.id);
        let info = `Bearbeite <strong>${current.id}</strong> (Kosten: ${current.dist}).<br>`;
        neighbors.forEach(l => {
            const target = simNodes.find(n => n.id === l.target);
            if(!target.visited) {
                const newDist = current.dist + l.weight;
                if(newDist < target.dist) {
                    target.dist = newDist;
                    target.pred = current.id;
                    info += `-> Update ${target.id}: Neue Kosten ${newDist}.<br>`;
                }
            }
        });
        document.getElementById('status-text').innerHTML = info;
        
        // Re-render to show colors
        renderGraph("#graph-container", simNodes, links, true, current.id);
        updateTable();
    }

    function updateTable() {
        const tbody = document.getElementById('table-body');
        tbody.innerHTML = '';
        simNodes.forEach(n => {
            const row = document.createElement('tr');
            if(n.visited) row.classList.add('bg-slate-700');
            const d = n.dist === Infinity ? "∞" : n.dist;
            const p = n.pred ? n.pred : "-";
            row.innerHTML = `<td>${n.id}</td><td>${d}</td><td>${p}</td>`;
            tbody.appendChild(row);
        });
    }

    // --- Slide 5: Result Render ---
    function initResultGraph() {
        // Just render graph but highlight the final path edges hardcoded
        const containerId = "#result-graph-container";
        d3.select(containerId).selectAll("*").remove();
        const container = document.querySelector(containerId);
        const w = container.clientWidth, h = container.clientHeight;
        const svg = d3.select(containerId).append("svg").attr("width", w).attr("height", h);
        
        // Def Arrow
        svg.append("defs").append("marker").attr("id", "arrowhead-res").attr("viewBox", "0 -5 10 10")
           .attr("refX", 25).attr("refY", 0).attr("markerWidth", 6).attr("markerHeight", 6).attr("orient", "auto")
           .append("path").attr("d", "M0,-5L10,0L0,5").attr("fill", "#475569");

        // Links
        svg.selectAll(".link").data(links).enter().append("line")
           .attr("stroke", d => {
               // Check if this link is part of final path
               const isPath = finalPathEdges.some(e => e.s === d.source && e.t === d.target);
               return isPath ? "#38bdf8" : "#334155";
           })
           .attr("stroke-width", d => finalPathEdges.some(e => e.s === d.source && e.t === d.target) ? 6 : 2)
           .attr("marker-end", "url(#arrowhead-res)")
           .attr("x1", d => getNodeBase(d.source).x).attr("y1", d => getNodeBase(d.source).y)
           .attr("x2", d => getNodeBase(d.target).x).attr("y2", d => getNodeBase(d.target).y);

        // Labels
        svg.selectAll(".lbl").data(links).enter().append("text")
           .attr("fill", "white").attr("font-size", 14)
           .attr("x", d => (getNodeBase(d.source).x + getNodeBase(d.target).x)/2)
           .attr("y", d => (getNodeBase(d.source).y + getNodeBase(d.target).y)/2 - 5)
           .text(d => d.weight);

        // Nodes
        const g = svg.selectAll(".node").data(nodes).enter().append("g").attr("transform", d => `translate(${d.x},${d.y})`);
        g.append("circle").attr("r", 20).attr("fill", d => ['A','B','C','E'].includes(d.id) ? "#10b981" : "#1e293b").attr("stroke", "white");
        g.append("text").attr("dy", 5).attr("text-anchor", "middle").attr("fill", "white").attr("font-weight", "bold").text(d => d.id);
    }

    // --- Helper ---
    function getNodeBase(id) { return nodes.find(n => n.id === id); }
    
    function renderGraph(containerId, nodeData, linkData, highlightCurrent, currentId) {
        d3.select(containerId).selectAll("*").remove();
        const container = document.querySelector(containerId);
        const w = container.clientWidth, h = container.clientHeight;
        const svg = d3.select(containerId).append("svg").attr("width", w).attr("height", h);

        svg.append("defs").append("marker").attr("id", "arrow").attr("viewBox", "0 -5 10 10")
           .attr("refX", 25).attr("refY", 0).attr("markerWidth", 6).attr("markerHeight", 6).attr("orient", "auto")
           .append("path").attr("d", "M0,-5L10,0L0,5").attr("fill", "#64748b");

        svg.selectAll("line").data(linkData).enter().append("line")
           .attr("stroke", "#64748b").attr("stroke-width", 2).attr("marker-end", "url(#arrow)")
           .attr("x1", d => getNodeBase(d.source).x).attr("y1", d => getNodeBase(d.source).y)
           .attr("x2", d => getNodeBase(d.target).x).attr("y2", d => getNodeBase(d.target).y);
        
        svg.selectAll(".w-lbl").data(linkData).enter().append("text")
           .attr("fill", "#94a3b8").attr("x", d => (getNodeBase(d.source).x + getNodeBase(d.target).x)/2)
           .attr("y", d => (getNodeBase(d.source).y + getNodeBase(d.target).y)/2 -5).text(d => d.weight);

        const g = svg.selectAll("g").data(nodeData).enter().append("g").attr("transform", d => `translate(${d.x},${d.y})`);
        
        g.append("circle").attr("r", 20)
         .attr("fill", d => d.id === currentId ? "#f59e0b" : (d.visited ? "#10b981" : "#1e293b"))
         .attr("stroke", "#e2e8f0").attr("stroke-width", 2);
         
        g.append("text").attr("dy", 5).attr("text-anchor", "middle").attr("fill", "white").attr("font-weight", "bold").text(d => d.id);
        g.append("text").attr("dy", -30).attr("text-anchor", "middle").attr("fill", "#38bdf8").text(d => d.dist === Infinity ? "∞" : d.dist);
    }
</script>
</body>
</html>
